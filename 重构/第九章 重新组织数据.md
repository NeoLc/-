数据结构的的重要性无论怎么强调都不过分，因此作者专门花一个章节探讨数据结构的重构。

在前面的搬移章节中，有简单的提到过，通过move字段，使得数据结构变的更加纯粹，本章节会介绍更多的类似手段。


1、拆分变量



先不看本小节的内容，先凭借你已有的经验，看看上面的代码有什么问题？？

一眼可以看出它又两个主要问题：

第一：名字起的非常差劲，从名字中看不出任何信息，temp并不能够体现出表达式的意图。

名字看不出意图，如果再不能从表达式的实现看出意图话，那么这段代码除了原作者怕是就没人能知道它到底是干什么的了。

第二：temp被使用了两次，一个变量用于两个用途，两个表达的作用和意图肯定是不同的，那么为什么还能共用一个名字呢？这显然不合理。

下图是作者做出的修改（可以看到解决了我说的两个问题）：



本小节表达的核心思想是，一个变量只应该有一个用途，一个责任，而不应该有多种用途，这回让阅读者产生理解障碍，

不知道它表达的到底是那种意思，需要频繁的翻看上下文，才能搞明白，这样会增加额外的理解负担。

2、字段改名

这里再次强调名字的重要性，之前是函数名，这里是数据结构的字段名。

3、以查询取代派生变量

这里再次强调了可变数据的坏处，它糟糕的地方在于，一处的修改，可能会对另一处造成破坏，而且很难知道到底是谁修改了它。

所以作者强调，可变数据的作用域应该越小越好，如果做不到，则作用域越大的可变数据应该进行越严格的封装保护。

这一点在在前面的好几个章节都被反复的强调过。

4、将引用对象改为值对象

使用引用的最大风险之一，就是它可能在别处被偷偷修改，而我们不知道。

如果仅仅只是想只读某个对象中数据，而且这个对象也不是特别大的话，是不是使用传值会更加安全一些？

这个问题我也一直没怎么想好，是copy、move、还是传指针、传引用、传值，好像没有一个定论。

5、将值对象改为引用对象

当一个数据是共享的数据，需要都很多处地方使用时，此时再使用值对象当然是不合适，无法做到数据的实时更新。

没有引用之前，是通过指针，有引用了，当然是使用引用进行替换。

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

本章节强调的内容，大部分在前面的章节都强调过，只不过这次在数据结构的场景下，再重新解释下而已。
